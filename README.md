# 🐟 Stealth Reader (摸鱼阅读器) - Python版

**Stealth Reader** 是一款专为“上班摸鱼”打造的桌面阅读工具。它基于 PyQt5 开发，具有极高的隐蔽性，支持**本地 TXT 阅读**和**手机端 [Legado](https://github.com/gedoor/legado) (阅读APP) 同步**。

无论是在深色 IDE 背景下，还是在复杂的桌面环境中，它都能完美融入，助你神不知鬼不觉地修仙。

## ✨ 核心特性

### 🛡️ 极致隐蔽

- **透明背景 & 无边框**：窗口完全无边框，背景透明度可调，文字仿佛直接印在屏幕上。

- **👻 幽灵模式 (Ghost Mode)**：鼠标移开窗口时，窗口自动变透明/隐藏；鼠标移入时自动显现。

- **🦎 变色龙模式 (Auto Mode)**：自动吸取窗口下方的屏幕颜色作为背景色，并自动反转文字颜色，完美融入任何环境（如 IDE 代码区、网页背景）。

- **🛡️ 系统级防截屏**：开启后，**截图、录屏、腾讯会议、Zoom 共享屏幕时，窗口完全不可见**（透明），只有你的肉眼能看到。

- **老板键 (Boss Key)**：一键隐藏/呼出窗口（默认为 `Esc`，可自定义），系统托盘同步隐藏。

### 📚 强大的阅读功能(推荐配合阅读APP使用)

- **📂 本地 TXT 智能阅读**：
  
  - **自适应分页**：不依赖死板的字符数，而是根据当前窗口大小几何计算分页，调整窗口大小后自动重排，文字永远填满窗口。
  
  - **进度锚点**：调整窗口或重启软件后，精准定位到上次阅读的第一个字，绝不迷路。
  
  - **编码兼容**：自动识别 UTF-8 和 GBK 编码。

- **📱 Legado (阅读APP) 同步**：
  
  - 利用“阅读APP”的 Web 服务接口，同步手机书架。
  
  - 支持目录跳转、搜索书籍。
  
  - **双向进度同步**：电脑看一半，手机接着看。

## 🛠️ 环境依赖与安装

本项目基于 Python 3 开发。

1. **安装 Python 依赖库**：
   
   Bash
   
   ```
   pip install PyQt5 requests keyboard
   ```

2. 运行：
   
   由于使用了全局键盘钩子（老板键），建议以管理员身份运行终端或 IDE，否则快捷键可能失效。
   
   Bash
   
   ```
   python main.py
   ```
   
   *(注：`main.py` 为你的主程序文件名)*

## 📖 使用指南

### 1. 基础操作

- **移动窗口**：按住文字区域即可拖动。

- **调整大小**：鼠标移动到窗口**右下角**，光标变化后拖动调整。

- **翻页**：
  
  - 鼠标滚轮
  
  - 键盘方向键 `↑` `↓` `←` `→`
  
  - 空格键 `Space` / `PageUp` / `PageDown`

- **右键菜单**：在窗口任意位置**右键**，可打开功能菜单（设置、书架、打开本地文件等）。

### 2. 打开本地 TXT

1. 右键菜单选择 **“📂 打开本地 TXT”**。

2. 选择文件后，软件会自动加载。

3. **特性**：你可以随意拖拽改变窗口大小，软件会自动重新计算当页内容，保证阅读连贯性。退出时会自动保存进度。

### 3. 连接 Legado (阅读APP)

如果你想看手机上的书，请按以下步骤操作：

1. 手机端打开 **“阅读” (Legado)** APP。

2. 点击 **“我的” -> “Web服务”**，开启服务。

3. 记录手机上显示的 IP 地址和端口（例如 `http://192.168.1.10:1122`）。

4. 在电脑端本软件上 **右键 -> ⚙️ 设置**。

5. 在 **Legado地址** 栏输入手机上的地址。

6. 保存后，右键选择 **“📚 网络书架”** 即可同步。

### 4. 隐蔽模式详解

在 **设置** 中可以开启以下模式：

- **🦎 自动挡 (变色龙)**：推荐开启。窗口背景会变成你壁纸或底层软件的颜色，文字自动变色。放在 VSCode 代码里就像注释一样。

- **👻 幽灵模式**：适合极其危险的环境。平时窗口几乎完全透明（看不见），只有当你假装移动鼠标经过该区域时，文字才会显现。

- **🛡️ 系统级防截屏**：利用 Windows API (`SetWindowDisplayAffinity`)。开启后，你截图发给同事，截图中该区域是空的/透明的，看不到小说内容。

## ⌨️ 快捷键

| **按键**            | **功能**      | **备注**  |
| ----------------- | ----------- | ------- |
| **Esc**           | 老板键 (显示/隐藏) | 可在设置中修改 |
| **↓ / → / Space** | 下一页         | 滚轮向下亦可  |
| **↑ / ←**         | 上一页         | 滚轮向上亦可  |

## ⚠️ 注意事项

1. **管理员权限**：如果发现 `Esc` 键无法隐藏窗口，请尝试以管理员身份运行程序（因为 `keyboard` 库监听全局按键需要权限）。

2. **崩溃问题**：已修复选择文件时的闪退问题（通过禁用 Windows 原生对话框解决）。

3. **编码**：本地文件首选 `UTF-8`，虽然支持 GBK，但特殊符号可能显示异常。

## 🎬 使用效果

- **窗口隐身**：开启幽灵模式或变色龙模式后，窗口可与桌面环境完美融合，文字仿佛直接印在屏幕上，旁人难以察觉。

  <img src="pic\变色龙.webp"/>

  <img src="pic\变色龙2.webp"/>

- **防截屏**：系统级防截屏功能确保在截图、录屏、会议共享时，阅读窗口内容不会被捕捉，极大提升安全性。

  <img src="pic\防截屏.webp"/>

## 🖱️ 菜单说明

在窗口任意位置点击右键，即可打开功能菜单，包含以下常用操作：

<img title="" src="pic/2026-01-29-11-17-50-image.png" alt="" data-align="center">

- **设置**：调整隐蔽模式、老板键、背景透明度等参数。
  
  <img title="" src="pic/2026-01-29-11-18-19-image.png" alt="" data-align="center">

- 

- **打开本地文件**：快速加载本地 TXT 文件进行阅读。

- **网络书架**：同步手机端 Legado 书架，实现多端进度同步。

右键菜单设计简洁直观，方便随时切换功能，无需离开当前窗口，极大提升了使用效率和隐蔽性。

---

> **Disclaimer**: 本软件仅供学习交流 PyQt5 界面开发技术使用。请合理安排工作时间，Work-Life Balance。

---

## 📦 如何打包 (Build)

如果你想自己生成 exe 文件，请使用 PyInstaller：  

```bash
# 普通打包

pyinstaller -F -w main.py

# 伪装打包 (指定图标和名称)

pyinstaller -F -w -i read.ico -n "StealthReader" main.py
```
